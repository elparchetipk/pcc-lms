# Database Configuration for PCC LMS
# This file contains database connection configurations for all environments

# =============================================================================
# POSTGRESQL CONFIGURATION
# =============================================================================

# Primary database for core business logic
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=pcc_lms
POSTGRES_USER=pcc_user
POSTGRES_PASSWORD=pcc_password

# Connection pool settings
POSTGRES_MAX_CONNECTIONS=100
POSTGRES_MIN_CONNECTIONS=5
POSTGRES_CONNECTION_TIMEOUT=30000
POSTGRES_IDLE_TIMEOUT=600000

# SSL Configuration (for production)
POSTGRES_SSL=false
POSTGRES_SSL_CERT_PATH=""
POSTGRES_SSL_KEY_PATH=""
POSTGRES_SSL_CA_PATH=""

# =============================================================================
# MONGODB CONFIGURATION
# =============================================================================

# Document database for notifications and flexible content
MONGODB_HOST=localhost
MONGODB_PORT=27017
MONGODB_DB=pcc_lms_notifications
MONGODB_USER=""
MONGODB_PASSWORD=""

# Connection settings
MONGODB_MAX_POOL_SIZE=10
MONGODB_MIN_POOL_SIZE=2
MONGODB_SERVER_SELECTION_TIMEOUT=30000
MONGODB_SOCKET_TIMEOUT=30000

# Authentication (if required)
MONGODB_AUTH_SOURCE=admin
MONGODB_AUTH_MECHANISM=SCRAM-SHA-256

# =============================================================================
# CLICKHOUSE CONFIGURATION
# =============================================================================

# Analytics database for BI and real-time metrics
CLICKHOUSE_HOST=localhost
CLICKHOUSE_PORT=8123
CLICKHOUSE_HTTP_PORT=8123
CLICKHOUSE_TCP_PORT=9000
CLICKHOUSE_DB=pcc_lms_analytics
CLICKHOUSE_USER=default
CLICKHOUSE_PASSWORD=""

# Performance settings
CLICKHOUSE_MAX_CONNECTIONS=50
CLICKHOUSE_CONNECTION_TIMEOUT=10000
CLICKHOUSE_RECEIVE_TIMEOUT=300000

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================

# Cache and session storage
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=""
REDIS_DB=0

# Session storage (separate DB)
REDIS_SESSION_DB=1

# Cache settings
REDIS_CACHE_TTL=3600
REDIS_MAX_RETRIES=3
REDIS_RETRY_DELAY=1000

# =============================================================================
# ELASTICSEARCH CONFIGURATION (for search service)
# =============================================================================

ELASTICSEARCH_HOST=localhost
ELASTICSEARCH_PORT=9200
ELASTICSEARCH_INDEX_PREFIX=pcc_lms
ELASTICSEARCH_USER=""
ELASTICSEARCH_PASSWORD=""

# =============================================================================
# MINIO CONFIGURATION (for content service)
# =============================================================================

MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_USE_SSL=false
MINIO_BUCKET_NAME=pcc-lms-content

# =============================================================================
# DATABASE URLS (for ORM/ODM connections)
# =============================================================================

# PostgreSQL URL
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# MongoDB URL
MONGODB_URL=mongodb://${MONGODB_HOST}:${MONGODB_PORT}/${MONGODB_DB}

# Redis URL
REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# ClickHouse URL
CLICKHOUSE_URL=http://${CLICKHOUSE_HOST}:${CLICKHOUSE_HTTP_PORT}

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================

# Backup settings
BACKUP_RETENTION_DAYS=30
BACKUP_LOCATION=/var/backups/pcc-lms
BACKUP_ENCRYPT=false
BACKUP_ENCRYPTION_KEY=""

# S3 backup settings (for production)
BACKUP_S3_BUCKET=""
BACKUP_S3_REGION=""
BACKUP_S3_ACCESS_KEY=""
BACKUP_S3_SECRET_KEY=""

# =============================================================================
# MONITORING AND LOGGING
# =============================================================================

# Database monitoring
DB_MONITORING_ENABLED=true
DB_SLOW_QUERY_LOG=true
DB_SLOW_QUERY_THRESHOLD=1000

# Connection monitoring
DB_CONNECTION_MONITORING=true
DB_HEALTH_CHECK_INTERVAL=30000

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================

# Development database settings
DEV_AUTO_MIGRATE=true
DEV_SEED_DATA=true
DEV_RESET_ON_START=false

# Debug settings
DB_DEBUG_QUERIES=false
DB_LOG_LEVEL=info

# =============================================================================
# PRODUCTION SETTINGS
# =============================================================================

# Production optimizations
PROD_CONNECTION_POOL_SIZE=50
PROD_QUERY_TIMEOUT=30000
PROD_STATEMENT_TIMEOUT=60000

# High availability
POSTGRES_READ_REPLICA_HOST=""
POSTGRES_READ_REPLICA_PORT=5432
MONGODB_REPLICA_SET=""
REDIS_SENTINEL_HOSTS=""

# Security
DB_REQUIRE_SSL=true
DB_SSL_VERIFY_CA=true
DB_ENCRYPT_PASSWORDS=true
